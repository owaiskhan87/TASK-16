<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>REST API Data Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f4f6f9;
    }

    header {
      background: #2c3e50;
      color: white;
      padding: 15px;
      text-align: center;
    }

    .container {
      padding: 20px;
      max-width: 1000px;
      margin: auto;
    }

    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    input, select, button {
      padding: 8px;
      font-size: 14px;
    }

    .card {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 6px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .pagination {
      margin-top: 20px;
    }

    .pagination button {
      margin-right: 5px;
      padding: 5px 10px;
    }

    .loading {
      text-align: center;
      font-weight: bold;
    }

    .error {
      color: red;
      text-align: center;
      font-weight: bold;
    }
  </style>
</head>
<body>

<header>
  <h2>User Dashboard (REST API Integration)</h2>
</header>

<div class="container">

  <div class="controls">
    <input type="text" id="searchInput" placeholder="Search by name..." />
    
    <select id="sortSelect">
      <option value="">Sort</option>
      <option value="asc">Name A-Z</option>
      <option value="desc">Name Z-A</option>
    </select>

    <button onclick="fetchUsers()">Reload</button>
  </div>

  <div id="status"></div>
  <div id="userList"></div>

  <div class="pagination" id="pagination"></div>

</div>

<script>
  const API_URL = "https://jsonplaceholder.typicode.com/users";

  const userList = document.getElementById("userList");
  const pagination = document.getElementById("pagination");
  const statusDiv = document.getElementById("status");
  const searchInput = document.getElementById("searchInput");
  const sortSelect = document.getElementById("sortSelect");

  let users = [];
  let currentPage = 1;
  const itemsPerPage = 3;

  async function fetchUsers() {
    statusDiv.innerHTML = '<div class="loading">Loading data...</div>';
    userList.innerHTML = "";
    pagination.innerHTML = "";

    try {
      const response = await fetch(API_URL);

      if (!response.ok) {
        throw new Error("Failed to fetch data");
      }

      const data = await response.json();
      users = data;
      statusDiv.innerHTML = "";
      renderUsers();
    } catch (error) {
      statusDiv.innerHTML = <div class="error">${error.message}</div>;
    }
  }

  function renderUsers() {
    let filteredUsers = [...users];

    // Filtering
    const searchValue = searchInput.value.toLowerCase();
    if (searchValue) {
      filteredUsers = filteredUsers.filter(user =>
        user.name.toLowerCase().includes(searchValue)
      );
    }

    // Sorting
    if (sortSelect.value === "asc") {
      filteredUsers.sort((a, b) => a.name.localeCompare(b.name));
    } else if (sortSelect.value === "desc") {
      filteredUsers.sort((a, b) => b.name.localeCompare(a.name));
    }

    // Pagination
    const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);
    const start = (currentPage - 1) * itemsPerPage;
    const paginatedUsers = filteredUsers.slice(start, start + itemsPerPage);

    userList.innerHTML = "";

    paginatedUsers.forEach(user => {
      const div = document.createElement("div");
      div.className = "card";
      div.innerHTML = `
        <h3>${user.name}</h3>
        <p><strong>Email:</strong> ${user.email}</p>
        <p><strong>Company:</strong> ${user.company.name}</p>
        <p><strong>City:</strong> ${user.address.city}</p>
      `;
      userList.appendChild(div);
    });

    renderPagination(totalPages);
  }

  function renderPagination(totalPages) {
    pagination.innerHTML = "";

    for (let i = 1; i <= totalPages; i++) {
      const btn = document.createElement("button");
      btn.textContent = i;

      if (i === currentPage) {
        btn.disabled = true;
      }

      btn.addEventListener("click", () => {
        currentPage = i;
        renderUsers();
      });

      pagination.appendChild(btn);
    }
  }

  searchInput.addEventListener("input", () => {
    currentPage = 1;
    renderUsers();
  });

  sortSelect.addEventListener("change", () => {
    renderUsers();
  });

  fetchUsers();
</script>

</body>
</html>

